drop table if exists gtn_prices;
drop table if exists db_list;
drop table if exists user_list;
drop table if exists item_list;

create table item_list (
    item_id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    item_name TEXT NOT null,
    vendor_cost INTEGER
);

create table user_list (
    user_id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    user_auth_id text not null,
    user_email text not null,
    tos_agreement BOOLEAN not null,
 	age_confirmation BOOLEAN not null
);

create table db_list (
	db_id INTEGER primary key generated by default as identity,
	owner_user_id integer references user_list(user_id) not null,
	server_name text not null,
	db_key text not null
);

create table gtn_prices (
	entry_id integer primary key generated by default as identity,
	user_id integer references user_list(user_id) not null,
	db_id integer references db_list(db_id) not null,
	item_id integer references item_list(item_id) not null,
	data_date TIMESTAMP DEFAULT timezone('UTC'::text, CURRENT_TIMESTAMP) NOT null,
	gtn_price integer not null
)